# 1-3. 쿠버네티스 아키텍처(Kubernetes Architecture)

## 네임스페이스(Namespace)

```tex
▫️ 쿠버네티스 리소스(ex. pod, 레플리카셋, 서비스, ...)들이 묶여 있는 하나의 가상 공간 or 그룹
```

<img src="https://user-images.githubusercontent.com/33214969/161412230-de8153e3-6f07-47c7-a258-2b4c70d87a99.png" alt="네임스페이스.png" width="50%;" />

+ 특징

  + 쿠버네티스 클러스터 내의 논리적인 분리 단위. 쿠버네티스 오브젝트를 묶는 하나의 가상 공간 or 그룹
  + 물리적인 분리 X → isolation 되지 않음
  + 쿠버네티스 클러스터 하나를 여러 팀 or 사용자가 공유함
  + 용도에 따라 실행해야 하는 앱을 구분할 때 사용함

+ 목적

  + namespace별 리소스 할당량을 지정하기 위해
  + 사용자별 namespace 접근 권한

+ DNS

  <img src="https://user-images.githubusercontent.com/33214969/161412228-ba44e144-f810-4fcf-928f-4aa1c0f38dd7.png" alt="네임스페이스-DNS.png" width="50%;" />

  + DNS 쿼리에 namespace를 명시하여, 다른 namespace에 있는 서비스에 접속할 수 있음
  + `(service명).(service의 namespace).svc.(domain)`
  + ex) (namespace) prod > (service) data, (namespace) test test namespace에 있는 pod = `data.prod` or `data.prod.svc.cluster.local`

+ Namespace 생성 및 조회

  + yaml 파일

    ```yaml
    apiVersion: v1
    kind: Namespace
    meetadata:
      name: test
    spec:
      limits:
      - default:
          cpu: 1
        defaultRequest:
          cpu: 0.5
        type: Container
    ```

  + 명령어

    ```yaml
    # namespace 생성
    $ kubectl create namespace (namespace명)
    
    # 특정 namespace 조회
    $ kubectl get pod -namespace (namespace명)
    ```

+ Namespace 관련 명령어

  + Namespace 조회 :`kubectl get namespaces` / (현재 시스템의 namespace 확인) `kubectl get namespace`
  + Namespace 생성 :  `kubectl create namespace (namespace명)` / `kubectl apply -f (yaml 파일명).yaml`
  + 특정 Namespace의 pod 생성 : `kubectl run (pod명) -n (namespace명)`
  + 특정 Namespace의 pod 조회 : `kubectl get pods --namespace (namespace명)` / `kubectl get pods --all-namespaces | grep (namespace명)`
  + 특정 Namespace를 생성할 수 있는지 확인 가능한 옵션 : `--dry-run`
  + Namespace 삭제 : `kubectl delete namespace (replicaset명)` / `kubectl delete -f (namespace yaml 파일명).yaml`

<br/><br/>네임스페이스<br/>[참고] https://artist-developer.tistory.com/33<br/>


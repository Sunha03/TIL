# 7. 스토리지(Storage)

## Docker Storage

### Storage Drivers

+ File system → /var/lib/docker/containers,image,volumes 에 default로 도커 데이터를 저장함
+ Volume Mount : `docker volume create date_volume` → /var/lib/docker/volumes/data_volume에 volume이 생성됨
+ volume을 도커 컨테이너 내에 mount : `docker run -v data_volume:/var/lib/mysql mysql` → mysql 컨테이너 내에 /var/llib/mysql 폴더로 마운트됨 → `-v` 옵션 :  `docker run`할 때 volume을 생성하지 않아도 해당 이름의 volume이 자동으로 생성됨
+ Bind Mount : `docker run -v /data/mysql:/var/lib/mysql mysql` / `docker run --mount type=bind, source=/data/mysql, target=/var/lib/mysql mysql` → Host에 존재하는 폴더를 컨테이너 내부로 mount
+ Storage driver의 역할 - 도커의 operation, layered 구조 유지, writable layer 생성, ...
+ ex) AUFS, ZFS, BTRFS, Device Mapper Overlay, Overlay2, ...

### Volume Driver

+ Volume Driver의 역할 - volume을 다룸
+ 기본적인 volume plugin : local volume plugin
  + local volume plugin이 host에 volume을 생성 + 데이터를 저장
  + 그 외 3rd party volume driver를 사용해도 됨 ex) Azure File Storage, Convoy, Digital Ocean Block, ...
+ driver 지정 : `docker run --volume-driver`

### Container Storage Interface

+ CRI(Container Runtime Interface) : 쿠버네티스 같은 솔루션이 도커와 같은 container runtime 솔루션과 소통하는지 정의하는 기준
+ CNI(Container Network Interface) : 네트워크 인터페이스로 CNI를 지킴으로써 쿠버네티스와 작동할 수 있는 네트워크 플러그인을 개발할 수 있음
+ CSI(Container Storage Interface) : 여러 storage 솔루션을 위한 인터페이스

<br/><br/>